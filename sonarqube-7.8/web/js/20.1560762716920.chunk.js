(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2036:function(e,o,t){"use strict";t.r(o);var n,r=t(743),s=t.n(r),i=t(693),a=t(709),u=t.n(a),p=t(28),l=(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),c=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return l(o,e),o.prototype.render=function(){var e=this.props.organization?Object(p.l)("permissions.page"):Object(p.l)("global_permissions.page"),o=this.props.organization?Object(p.l)("organization_permissions.page.description"):Object(p.l)("global_permissions.page.description");return i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},e),this.props.loading&&i.createElement("i",{className:"spinner"}),i.createElement("div",{className:"page-description"},o))},o}(i.PureComponent),g=t(705),m=t(1197),f=t(1222),d=t(732),h=t(925),v=t(707),y=function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function n(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),P=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.handleToggleUser=function(e,t){return e.permissions.includes(t)?o.props.revokePermissionFromUser(e.login,t):o.props.grantPermissionToUser(e.login,t)},o.handleToggleGroup=function(e,t){return e.permissions.includes(t)?o.props.revokePermissionFromGroup(e.name,t):o.props.grantPermissionToGroup(e.name,t)},o}return y(o,e),o.prototype.render=function(){var e=this.props,o=e.filter,t=e.groups,n=e.groupsPaging,r=e.users,s=e.usersPaging,a=this.props.organization?"organizations_permissions":"global_permissions",u=this.props.appState.qualifiers.includes("VW"),p=Object(h.e)(u?h.d:h.c,a),l=0,c=0;return"users"!==o&&(l+=t.length,c+=n?n.total:t.length),"groups"!==o&&(l+=r.length,c+=s?s.total:r.length),i.createElement(i.Fragment,null,i.createElement(f.a,{filter:this.props.filter,groups:this.props.groups,loading:this.props.loading,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:p,query:this.props.query,users:this.props.users},i.createElement(m.a,{filter:this.props.filter,onFilter:this.props.onFilter,onSearch:this.props.onSearch,query:this.props.query})),i.createElement(d.a,{count:l,loadMore:this.props.onLoadMore,total:c}))},o}(i.PureComponent),_=Object(g.connect)(function(e){return{appState:Object(v.getAppState)(e)}})(P),b=t(848),O=t(716),S=(t(1198),function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function n(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}()),j=function(){return(j=Object.assign||function(e){for(var o,t=1,n=arguments.length;t<n;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e}).apply(this,arguments)},w=function(e){function o(o){var t=e.call(this,o)||this;return t.mounted=!1,t.loadUsersAndGroups=function(e,o){var n=t.props.organization,r=t.state,s=r.filter,i=r.query,a="groups"!==s?b.i({q:i||void 0,organization:n&&n.key,p:e}):Promise.resolve({paging:void 0,users:[]}),u="users"!==s?b.h({q:i||void 0,organization:n&&n.key,p:o}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([a,u])},t.loadHolders=function(){return t.setState({loading:!0}),t.loadUsersAndGroups().then(function(e){var o=e[0],n=e[1];t.mounted&&t.setState({groups:n.groups,groupsPaging:n.paging,loading:!1,users:o.users,usersPaging:o.paging})},t.stopLoading)},t.onLoadMore=function(){var e=t.state,o=e.usersPaging,n=e.groupsPaging;return t.setState({loading:!0}),t.loadUsersAndGroups(o?o.pageIndex+1:1,n?n.pageIndex+1:1).then(function(e){var o=e[0],n=e[1];t.mounted&&t.setState(function(e){var t=e.groups,r=e.users;return{groups:t.concat(n.groups),groupsPaging:n.paging,loading:!1,users:r.concat(o.users),usersPaging:o.paging}})},t.stopLoading)},t.onFilter=function(e){t.setState({filter:e},t.loadHolders)},t.onSearch=function(e){t.setState({query:e},t.loadHolders)},t.addPermissionToGroup=function(e,o,t){return e.map(function(e){return e.name===o?j({},e,{permissions:e.permissions.concat([t])}):e})},t.addPermissionToUser=function(e,o,t){return e.map(function(e){return e.login===o?j({},e,{permissions:e.permissions.concat([t])}):e})},t.removePermissionFromGroup=function(e,o,t){return e.map(function(e){return e.name===o?j({},e,{permissions:s()(e.permissions,t)}):e})},t.removePermissionFromUser=function(e,o,t){return e.map(function(e){return e.login===o?j({},e,{permissions:s()(e.permissions,t)}):e})},t.grantPermissionToGroup=function(e,o){return t.mounted?(t.setState(function(n){var r=n.groups;return{groups:t.addPermissionToGroup(r,e,o)}}),b.o({groupName:e,permission:o,organization:t.props.organization&&t.props.organization.key}).then(function(){},function(){t.mounted&&t.setState(function(n){var r=n.groups;return{groups:t.removePermissionFromGroup(r,e,o)}})})):Promise.resolve()},t.grantPermissionToUser=function(e,o){return t.mounted?(t.setState(function(n){var r=n.users;return{users:t.addPermissionToUser(r,e,o)}}),b.p({login:e,permission:o,organization:t.props.organization&&t.props.organization.key}).then(function(){},function(){t.mounted&&t.setState(function(n){var r=n.users;return{users:t.removePermissionFromUser(r,e,o)}})})):Promise.resolve()},t.revokePermissionFromGroup=function(e,o){return t.mounted?(t.setState(function(n){var r=n.groups;return{groups:t.removePermissionFromGroup(r,e,o)}}),b.t({groupName:e,permission:o,organization:t.props.organization&&t.props.organization.key}).then(function(){},function(){t.mounted&&t.setState(function(n){var r=n.groups;return{groups:t.addPermissionToGroup(r,e,o)}})})):Promise.resolve()},t.revokePermissionFromUser=function(e,o){return t.mounted?(t.setState(function(n){var r=n.users;return{users:t.removePermissionFromUser(r,e,o)}}),b.u({login:e,permission:o,organization:t.props.organization&&t.props.organization.key}).then(function(){},function(){t.mounted&&t.setState(function(n){var r=n.users;return{users:t.addPermissionToUser(r,e,o)}})})):Promise.resolve()},t.stopLoading=function(){t.mounted&&t.setState({loading:!1})},t.state={filter:"all",groups:[],loading:!0,query:"",users:[]},t}return S(o,e),o.prototype.componentDidMount=function(){this.mounted=!0,this.loadHolders()},o.prototype.componentWillUnmount=function(){this.mounted=!1},o.prototype.render=function(){return i.createElement("div",{className:"page page-limited"},i.createElement(O.a,{suggestions:"global_permissions"}),i.createElement(u.a,{title:Object(p.l)("global_permissions.permission")}),i.createElement(c,{loading:this.state.loading,organization:this.props.organization}),i.createElement(_,{filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,loadHolders:this.loadHolders,loading:this.state.loading,onFilter:this.onFilter,onLoadMore:this.onLoadMore,onSearch:this.onSearch,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,users:this.state.users,usersPaging:this.state.usersPaging}))},o}(i.PureComponent);o.default=w},711:function(e,o,t){"use strict";t.d(o,"a",function(){return u});var n=t(693),r=t(694),s=t(703),i=t(749),a=t(701);t(721);function u(e){var o=e.children,t=void 0===o?n.createElement(i.a,{fill:a.gray71,size:12}):o,u=e.tagName,p=void 0===u?"div":u;return n.createElement(p,{className:r("help-tooltip",e.className)},n.createElement(s.a,{mouseLeaveDelay:.25,onShow:e.onShow,overlay:e.overlay,placement:e.placement},n.createElement("span",{className:"display-inline-flex-center"},t)))}},716:function(e,o,t){"use strict";t.d(o,"a",function(){return a});var n,r=t(693),s=t(739),i=(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)});function a(e){var o=e.suggestions;return r.createElement(s.a.Consumer,null,function(e){var t=e.addSuggestions,n=e.removeSuggestions;return r.createElement(u,{addSuggestions:t,removeSuggestions:n,suggestions:o})})}var u=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return i(o,e),o.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},o.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))},o.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},o.prototype.render=function(){return null},o}(r.PureComponent)},721:function(e,o,t){var n=t(722);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(697)(n,r);n.locals&&(e.exports=n.locals)},722:function(e,o,t){(e.exports=t(696)(!1)).push([e.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""])},732:function(e,o,t){"use strict";t.d(o,"a",function(){return p});var n=t(693),r=t(694),s=t(702),i=t(28),a=t(704),u=function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)o.indexOf(n[r])<0&&(t[n[r]]=e[n[r]])}return t};function p(e){var o=e.ready,t=void 0===o||o,p=u(e,["ready"]),l=p.total&&p.total>p.count,c=n.createElement("a",{className:"spacer-left",href:"#",onClick:function(e){e.preventDefault(),e.currentTarget.blur(),p.loadMore&&p.loadMore()}},Object(i.l)("show_more")),g=r("spacer-top note text-center",{"new-loading":!t},p.className);return n.createElement("footer",{className:g},Object(i.m)("x_of_y_shown",Object(a.formatMeasure)(p.count,"INT",null),Object(a.formatMeasure)(p.total,"INT",null)),null!=p.loadMore&&l?c:null,p.loading&&n.createElement(s.a,{className:"text-bottom spacer-left position-absolute"}))}}}]);
//# sourceMappingURL=20.1560762716920.chunk.js.map